### 是什么：

是一个分布式开源的程序协调服务，主要功能是配置管理，名字服务（服务注册），分布式锁，集群管理。

#### 配置管理

类似SpringCloudConfig

#### 名字服务

就是我们所说的服务注册，不同的服务器之间可以通过Zookeeper进行注册并互相发现，一旦某个服务器的IP更改了那么，其他的服务器也可以通过Zookeeper获得通知

#### 分布式锁

协调分布式进程之间的活动，什么时候需要同步呢，就是我们需要防止我们的代码对**共享的内存和数据同时进行操作**的过程中破坏了数**据的完整性和正确性**，如果不保证的话那么就不可靠了，那么我们就需要一些机制去让他们按我们希望的顺序去执行代码

#### 集群管理

集群中节点可以加入可以退出，也可能会发生故障，这个时候就需要一个管理者使得这种变化能被感知



#### 存储结构

Zookeeper底层是一整套数据结构，是一个树形结构，每个节点都可以被称为Znode，每个节点都可以存储1MB的数据，并且提供了文化系统的操作命令，其中各个节点根据是否持久分为四种类型。



#### 集群中的Zookeeper

- leader: 发起投票，更新系统状态，也可以响应请求
- learner:
  - Follower：用于响应客户端请求并返回结果，可参与投票
  - Observer：不参加投票过程，将写请求发给leader，不返回结果
- Client：服务使用者



#### 特性（设计目的）

- 一致性：对client来说看到的内容都是一样的
- 可靠性
- 实时性：能保证在一定时间间隔内获得更新的消息，并不是完全的瞬时
- 等待无关？
- 原子性
- 顺序性：包含全局有序和偏序



#### 我们的应用如何应用ZK

就是通过这些简单的文件操作去完成上述功能。













### 如何系统地去理解和表述分布式

https://juejin.im/post/5da6b68b51882565f76606fb

两种**架构**：

SOA：面向服务的架构，子模块之间相互分离，但是需要总线去连结

MSA：微服务架构，分离更加彻底

分布式自然离不开**网络**，有几种网络工作模式

- 同步网络：全局锁，延迟有限（就是延迟能控制在一个范围内）
- 半同步网络
- 异步网络：部分算法不可行

一致性理论：

- 强一致性ACID
- 分布式一致性CAP
- 弱一致性（基本可用）

这些理论依托于在一定原则下的良好的数据结构和一致性算法



#### 分布式在不同的场景下

-  文件系统：比如HDFS  FastDFS
-  数据库：Hbase，MongoDB，ES 一般都是非关系型数据库
-  计算：Hadoop   Spark   Flink  
-  缓存： Redis 
-  消息：Kafka     RabbitMQ
-  监控：Zookeeper
-  业务:（处理业务逻辑的）：Dubbo
-  账本：bitcoin